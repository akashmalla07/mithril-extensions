<html>
<head>
	<title></title>
	<script src="examples/mithril.js"></script>
	<script src="../mithril.bindings/mithril.bindings.js"></script>
	<script src="../mithril.sugartags/mithril.sugartags.js"></script>
	<script src="../mithril.templates/mithril.templates.js"></script>
	<script src="mithril.animate.js"></script>

	<style>
		#content { width: 12em; }
	</style>


</head>
<body>
<h1>Mithril.bindings - bi-directionally bound value</h1>
<div id="content"></div>

<button type="button" id="setValueButton">Set name</button>

<script>

//	A few basic animations
m.addBinding("toggleFade", function(prop){
	var toggle = m.unwrap(prop);
	m.animate(this, { 
		opacity: toggle? 0: 1, 
		duration: "0.5s"
	});
});

m.addBinding("toggleFadeShrink", function(prop){
	var toggle = m.unwrap(prop);
	m.animate(this, { 
		opacity: toggle? 0: 1, 
		scale: toggle? 0: 1, 
		duration: "0.5s" 
	});
});

</script>

<script>
//	Basic bi-directional data binding
var app = {
	model: function(name) {
		this.name = m.p(name);
		this.hide = m.p();
	},
	controller: function() {
		window.model = this.user = new app.model("John Doe");
	},
	view: function(data) {
		var u = data.user;
		return [
			H1({ text: u.name }),
			BUTTON({ type: "button", toggle: u.hide }, "Toggle hide"),
			DIV({ toggleFadeShrink: u.hide }, [
				INPUT({ name: "name", value: u.name }),
				DIV("Model name value: " + u.name())
			])
		];
	}
};

//initialize
m.module(document.getElementById('content'), app);
</script>

<script>
//	Demonstrate external access to the model
document.getElementById('setValueButton').onclick = function(){
	model.name("John Smith");
};
</script>

</body>
</html>